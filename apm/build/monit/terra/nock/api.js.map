{"version":3,"sources":["../../../../src/monit/terra/nock/api.js"],"names":["nockConsulApi","host","port","MockContents","TestUtil","getFolderContent","baseUri","put","reply","GetOracleMisses","get","GetOracleAgentChecks","TerraApi","height","result","GetDenomActives","GetExchangeRates","GetExchangeRateUmnt","GetExchangeRateUsdr"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAGA,IAAMA,gBAAgB,eAAhBA,aAAgB,CAAOC,IAAP,EAAaC,IAAb,EAAsB;AAC1C,MAAMC,eAAe,MAAMC,mBAASC,gBAAT,CAA0B,2BAA1B,CAA3B;AACA,MAAMC,sBAAoBL,IAApB,SAA4BC,IAAlC;AACA,sBAAKI,OAAL,EACGC,GADH,CACO,SADP,EAEGC,KAFH,CAES,GAFT,EAEcL,aAAaM,eAF3B;AAGA,sBAAKH,OAAL,EAAcI,GAAd,CAAkB,kBAAlB,EAAsCF,KAAtC,CAA4C,GAA5C,EAAiDL,aAAaQ,oBAA9D;AACA,sBAAKL,OAAL,EAAcC,GAAd,CAAkB,0FAAlB,EAA8GC,KAA9G,CAAoH,GAApH,EAAyH,EAAzH;AACA,sBAAKF,OAAL,EAAcC,GAAd,CAAkB,uDAAlB,EAA2EC,KAA3E,CAAiF,GAAjF,EAAsF,EAAtF;AACD,CATD;;AAWA,IAAMI,WAAW,eAAXA,QAAW,CAAOX,IAAP,EAAaC,IAAb,EAAsB;AACrC,MAAMC,eAAe,MAAMC,mBAASC,gBAAT,CAA0B,2BAA1B,CAA3B;AACA,MAAMC,sBAAoBL,IAApB,SAA4BC,IAAlC;AACA,sBAAKI,OAAL,EACGI,GADH,CACO,yEADP,EAEGF,KAFH,CAES,GAFT,EAEc,EAAEK,QAAQ,KAAV,EAAiBC,QAAQ,IAAzB,EAFd;AAGA,sBAAKR,OAAL,EACGI,GADH,CACO,wBADP,EAEGF,KAFH,CAES,GAFT,EAEcL,aAAaY,eAF3B;AAGA,sBAAKT,OAAL,EACGI,GADH,CACO,+BADP,EAEGF,KAFH,CAES,GAFT,EAEcL,aAAaa,gBAF3B;AAGA,sBAAKV,OAAL,EACGI,GADH,CACO,+EADP,EAEGF,KAFH,CAES,GAFT,EAEcL,aAAac,mBAF3B;AAGA,sBAAKX,OAAL,EACGI,GADH,CACO,+EADP,EAEGF,KAFH,CAES,GAFT,EAEcL,aAAae,mBAF3B;AAGA,QAAMlB,cAAcC,IAAd,EAAoB,IAApB,CAAN;AACD,CAnBD;;kBAqBeW,Q","file":"api.js","sourcesContent":["import nock from 'nock';\nimport TestUtil from '../../../common/test-util';\n\n\nconst nockConsulApi = async (host, port) => {\n  const MockContents = await TestUtil.getFolderContent('monit/terra/nock/fixtures');\n  const baseUri = `http://${host}:${port}`;\n  nock(baseUri)\n    .put('/v1/txn')\n    .reply(200, MockContents.GetOracleMisses);\n  nock(baseUri).get('/v1/agent/checks').reply(200, MockContents.GetOracleAgentChecks);\n  nock(baseUri).put('/v1/kv/backend/terra/oracle/terravaloper1emscfpz9jjtj8tj2nh70y25uywcakldsj76luz/miss/100').reply(200, '');\n  nock(baseUri).put('/v1/agent/check/warn/oracle-terra-missing-vote?note=2').reply(200, '');\n};\n\nconst TerraApi = async (host, port) => {\n  const MockContents = await TestUtil.getFolderContent('monit/terra/nock/fixtures');\n  const baseUri = `http://${host}:${port}`;\n  nock(baseUri)\n    .get('/oracle/voters/terravaloper1emscfpz9jjtj8tj2nh70y25uywcakldsj76luz/miss')\n    .reply(200, { height: '500', result: '10' });\n  nock(baseUri)\n    .get('/oracle/denoms/actives')\n    .reply(200, MockContents.GetDenomActives);\n  nock(baseUri)\n    .get('/oracle/denoms/exchange_rates')\n    .reply(200, MockContents.GetExchangeRates);\n  nock(baseUri)\n    .get('/oracle/denoms/umnt/votes/terravaloper1emscfpz9jjtj8tj2nh70y25uywcakldsj76luz')\n    .reply(200, MockContents.GetExchangeRateUmnt);\n  nock(baseUri)\n    .get('/oracle/denoms/usdr/votes/terravaloper1emscfpz9jjtj8tj2nh70y25uywcakldsj76luz')\n    .reply(200, MockContents.GetExchangeRateUsdr);\n  await nockConsulApi(host, 8500);\n};\n\nexport default TerraApi;\n"]}