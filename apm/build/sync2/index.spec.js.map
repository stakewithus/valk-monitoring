{"version":3,"sources":["../../src/sync2/index.spec.js"],"names":["describe","process","env","TERRA_LCD","before","it","configDir","path","join","__dirname"],"mappings":";;AAAA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEAA,SAAS,oBAAT,EAA+B,YAAM;AACnCC,UAAQC,GAAR,CAAYC,SAAZ,GAAwB,gBAAxB;AACAC,SAAO,kBAAY;AACjB,UAAM,mBAAa,WAAb,EAA0B,IAA1B,CAAN;AACA,UAAM,mBAAc,WAAd,EAA2B,IAA3B,CAAN;AACA,UAAM,sBAAoB,WAApB,EAAiC,IAAjC,CAAN;AACD,GAJD;AAKAJ,WAAS,uCAAT,EAAkD,YAAM;AACtDK,OAAG,6BAAH,EAAkC,kBAAY;AAC5C,UAAMC,YAAYC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,MAArB,CAAlB;AACA,YAAM,qBAAK,WAAL,EAAkB,IAAlB,EAAwB,IAAxB,EAA8BH,SAA9B,EAAyC,EAAzC,CAAN;AACD,KAHD;AAIAD,OAAG,gDAAH,EAAqD,kBAAY;AAC/D,UAAMC,YAAYC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,MAArB,CAAlB;AACA,YAAM,qBAAK,WAAL,EAAkB,IAAlB,EAAwB,IAAxB,EAA8BH,SAA9B,EAAyC,EAAzC,CAAN;AACD,KAHD;AAIAD,OAAG,mCAAH,EAAwC,kBAAY;AAClD,YAAM,qBAAK,WAAL,EAAkB,IAAlB,EAAwB,IAAxB,EAA8B,IAA9B,EAAoC,EAApC,EAAwC,IAAxC,EAA8C,yBAA9C,CAAN;AACD,KAFD;AAGD,GAZD;AAaD,CApBD","file":"index.spec.js","sourcesContent":["import path from 'path';\n\nimport NockNomadAPI from '../plugins/schedulers/nomad2/nocks/api';\nimport NockConsulAPI from '../plugins/backends/consul2/nocks/api';\nimport NockOracleConsulAPI from '../plugins/backends/consul2/nocks/oracle';\n\nimport sync from './index';\n\ndescribe('Sync Command Tests', () => {\n  process.env.TERRA_LCD = '127.0.0.1:1321';\n  before(async () => {\n    await NockNomadAPI('127.0.0.1', 4646);\n    await NockConsulAPI('127.0.0.1', 8500);\n    await NockOracleConsulAPI('127.0.0.1', 8500);\n  });\n  describe('# sync --node 127.0.0.1 --config /app', () => {\n    it('should run the sync command', async () => {\n      const configDir = path.join(__dirname, 'fix1');\n      await sync('127.0.0.1', 4646, 8500, configDir, {});\n    });\n    it('should run the sync command and update the job', async () => {\n      const configDir = path.join(__dirname, 'fix2');\n      await sync('127.0.0.1', 4646, 8500, configDir, {});\n    });\n    it('should run the sync without nomad', async () => {\n      await sync('127.0.0.1', 4646, 8500, null, {}, true, 'prod-config/config.json');\n    });\n  });\n});\n"]}