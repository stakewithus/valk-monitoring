{"version":3,"sources":["../../src/server/index.js"],"names":["logger","child","module","start","port","node","nomadPort","consulPort","production","prodConfigFile","server","listen","err","error","toString","info","process","on","exception","console","log"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,sBAAOC,KAAP,CAAa,EAAEC,QAAQ,YAAV,EAAb,CAAf;;AAEA,IAAMC,QAAQ,SAARA,KAAQ,OAER;AAAA,MADJC,IACI,QADJA,IACI;AAAA,MADEC,IACF,QADEA,IACF;AAAA,MADQC,SACR,QADQA,SACR;AAAA,MADmBC,UACnB,QADmBA,UACnB;AAAA,MAD+BC,UAC/B,QAD+BA,UAC/B;AAAA,MAD2CC,cAC3C,QAD2CA,cAC3C;;AACJ,MAAMC,SAAS,sBAAO;AACpBL,cADoB,EACdC,oBADc,EACHC,sBADG,EACSC,sBADT,EACqBC;AADrB,GAAP,CAAf;AAGAC,SAAOC,MAAP,CAAcP,IAAd,EAAoB,UAACQ,GAAD,EAAS;AAC3B,QAAIA,GAAJ,EAAS;AACP,aAAOZ,OAAOa,KAAP,CAAaD,OAAOA,IAAIE,QAAJ,EAApB,CAAP;AACD;AACD,WAAOd,OAAOe,IAAP,CAAY,6BAAZ,EAA2CX,IAA3C,CAAP;AACD,GALD;AAMA,SAAOM,MAAP;AACD,CAbD;;AAeAM,QAAQC,EAAR,CAAW,mBAAX,EAAgC,UAACC,SAAD,EAAe;AAC7CC,UAAQC,GAAR,CAAY,WAAZ,EAAyBF,SAAzB;AACD,CAFD;;kBAIe;AACbf;AADa,C","file":"index.js","sourcesContent":["import pino from 'pino';\nimport Server from './server';\n\nconst logger = pino().child({ module: 'cmd/health' });\n\nconst start = ({\n  port, node, nomadPort, consulPort, production, prodConfigFile,\n}) => {\n  const server = Server({\n    node, nomadPort, consulPort, production, prodConfigFile,\n  });\n  server.listen(port, (err) => {\n    if (err) {\n      return logger.error(err && err.toString());\n    }\n    return logger.info('Server is listening on port', port);\n  });\n  return server;\n};\n\nprocess.on('uncaughtException', (exception) => {\n  console.log('EXCEPTION', exception);\n});\n\nexport default {\n  start,\n};\n"]}